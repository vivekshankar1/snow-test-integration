<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_transform_script">
    <sys_transform_script action="INSERT_OR_UPDATE">
        <active>true</active>
        <map display_value="Chef Automate Sync Transform">56940d5cdbe8e700197478fdaa96190b</map>
        <order>100</order>
        <script><![CDATA[(function runTransformScript(source, map, log, target /*undefined onStart*/ ) {
    var logger = new Logger();
	var util = new Util();
	
    try {
		
		source.manufacturer = util.transformManufacturer(source.manufacturer);
		source.cpu_manufacturer = util.transformManufacturer(source.cpu_manufacturer);		
		logger.debug("transformed cpu manufacturer:  " + source.cpu_manufacturer);		
		source.model_category = util.transformModelCategory(source.os_family);	
		logger.debug("transformed model category:  " + source.model_category);
		source.model_id = util.transformModel(source.model_id, source.model_category, source.manufacturer);	
		logger.debug("transformed model:  " + source.model_id);
		
        var cmdbUtil = new global.CMDBTransformUtil();
        cmdbUtil.setDataSource('ImportSet');
        cmdbUtil.identifyAndReconcile(source, map, log);
        ignore = true;

        if (cmdbUtil.hasError()) {
            var errorMessage = cmdbUtil.getError();
            logger.error(errorMessage);
        } else {
            logger.info('IE Output Payload: ' + cmdbUtil.getOutputPayload());
            logger.info('Imported CI: ' + cmdbUtil.getOutputRecordSysId());
			source.server = cmdbUtil.getOutputRecordSysId();
        }
    } catch (err) {
        logger.errorWithStack("CMDBTransformUtil error", err);
    }
})(source, map, log, target);]]></script>
        <sys_class_name>sys_transform_script</sys_class_name>
        <sys_created_by>mscott</sys_created_by>
        <sys_created_on>2020-03-24 15:56:15</sys_created_on>
        <sys_id>16681274db378810a9ad266e1396192d</sys_id>
        <sys_mod_count>29</sys_mod_count>
        <sys_name>onBefore</sys_name>
        <sys_package display_value="Chef Automate" source="x_chef_automate">4cd4b300db68e700197478fdaa961908</sys_package>
        <sys_policy/>
        <sys_scope display_value="Chef Automate">4cd4b300db68e700197478fdaa961908</sys_scope>
        <sys_update_name>sys_transform_script_16681274db378810a9ad266e1396192d</sys_update_name>
        <sys_updated_by>mscott</sys_updated_by>
        <sys_updated_on>2020-04-08 12:49:16</sys_updated_on>
        <when>onBefore</when>
    </sys_transform_script>
</record_update>
